name: Package Projects

on:
  push:
    tags:
      - 'v*'

jobs:
  package:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Package Teste
        run: |
          mkdir -p zip/Teste/TProcura/Teste
          cp TProcura/*.cpp TProcura/*.h zip/Teste/TProcura/ 2>/dev/null || true
          cp TProcura/Teste/*.cpp TProcura/Teste/*.h zip/Teste/TProcura/Teste/ 2>/dev/null || true
          cd zip/Teste && zip -r ../../Teste.zip . && cd ../..

      - name: Package Construtiva
        run: |
          mkdir -p zip/Construtiva/TProcura/Construtiva/Teste
          cp TProcura/*.cpp TProcura/*.h zip/Construtiva/TProcura/ 2>/dev/null || true
          cp TProcura/Construtiva/*.cpp TProcura/Construtiva/*.h zip/Construtiva/TProcura/Construtiva/ 2>/dev/null || true
          cp TProcura/Construtiva/Teste/*.cpp TProcura/Construtiva/Teste/*.h zip/Construtiva/TProcura/Construtiva/Teste/ 2>/dev/null || true
          cd zip/Construtiva && zip -r ../../Construtiva.zip . && cd ../..

      - name: Package Melhorativa
        run: |
          mkdir -p zip/Melhorativa/TProcura/Melhorativa/Teste
          cp TProcura/*.cpp TProcura/*.h zip/Melhorativa/TProcura/ 2>/dev/null || true
          cp TProcura/Melhorativa/*.cpp TProcura/Melhorativa/*.h zip/Melhorativa/TProcura/Melhorativa/ 2>/dev/null || true
          cp TProcura/Melhorativa/Teste/*.cpp TProcura/Melhorativa/Teste/*.h zip/Melhorativa/TProcura/Melhorativa/Teste/ 2>/dev/null || true
          cd zip/Melhorativa && zip -r ../../Melhorativa.zip . && cd ../..

      - name: Package Adversa
        run: |
          mkdir -p zip/Adversa/TProcura/Adversa/Teste
          mkdir -p zip/Adversa/TProcura/Construtiva/Teste
          cp TProcura/*.cpp TProcura/*.h zip/Adversa/TProcura/ 2>/dev/null || true
          cp TProcura/Adversa/*.cpp TProcura/Adversa/*.h zip/Adversa/TProcura/Adversa/ 2>/dev/null || true
          cp TProcura/Adversa/Teste/*.cpp TProcura/Adversa/Teste/*.h zip/Adversa/TProcura/Adversa/Teste/ 2>/dev/null || true
          cp TProcura/Construtiva/*.cpp TProcura/Construtiva/*.h zip/Adversa/TProcura/Construtiva/ 2>/dev/null || true
          cd zip/Adversa && zip -r ../../Adversa.zip . && cd ../..

      - name: Upload zips to Release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            Teste.zip
            Construtiva.zip
            Melhorativa.zip
            Adversa.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
